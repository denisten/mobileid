{"ast":null,"code":"import { MongoClient } from 'mongodb';\n\nconst help = async res => {\n  const mongoClient = new MongoClient(process.env.dataBaseUrl);\n  await mongoClient.connect(err => err && res.json(400));\n  return mongoClient;\n};\n\nexport default (async (req, res) => {\n  console.log(JSON.parse(req.body));\n\n  if (req.body.feedback) {\n    // const mongoClient = await help(res);\n    // const db = mongoClient.db(\"Main\");\n    // const collection = db.collection(\"Main\");\n    switch (req.body.feedback) {\n      case \"dislike\":\n        console.log('disliked!!!');\n        break;\n\n      case \"like\":\n        console.log('liked!');\n        break;\n    }\n\n    res.status(200);\n    console.log('send 200');\n  } else {\n    res.status(400);\n    res.json({\n      message: 'No data in request'\n    });\n  } // const mongoClient = new MongoClient(process.env.dataBaseUrl);\n  // mongoClient.connect(function(err, client){\n  //     if(err){\n  //         res.status(500)\n  //         res.json({message: 'cannot connect to db'})\n  //     }\n  //     // взаимодействие с базой данных\n  //     console.log('connected to db')\n  //\n  //     const db = mongoClient.db(\"usersdb\");\n  //     const collection = db.collection(\"users\");\n  //     let user = {name: \"Tom\", age: 23};\n  //     collection.insertOne(user, function(err, result){\n  //         if(err){\n  //             res.status(500);\n  //             return console.log(err);\n  //         }\n  //         console.log(result.ops);\n  //         // mongoClient.close();\n  //     });\n  //     client.close();\n  // });\n  // res.json({status: 'ok'})\n\n});","map":{"version":3,"sources":["/Users/denisten/workspace/mid-landing/pages/api/test.ts"],"names":["MongoClient","help","res","mongoClient","process","env","dataBaseUrl","connect","err","json","req","console","log","JSON","parse","body","feedback","status","message"],"mappings":"AACA,SAAQA,WAAR,QAA0B,SAA1B;;AAEA,MAAMC,IAAI,GAAG,MAAOC,GAAP,IAAgC;AACzC,QAAMC,WAAW,GAAG,IAAIH,WAAJ,CAAgBI,OAAO,CAACC,GAAR,CAAYC,WAA5B,CAApB;AACA,QAAMH,WAAW,CAACI,OAAZ,CAAqBC,GAAD,IAASA,GAAG,IAAIN,GAAG,CAACO,IAAJ,CAAS,GAAT,CAApC,CAAN;AACA,SAAON,WAAP;AACH,CAJD;;AAMA,gBAAe,OAAOO,GAAP,EAA4BR,GAA5B,KAAqD;AAEhES,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,KAAL,CAAWJ,GAAG,CAACK,IAAf,CAAZ;;AACA,MAAGL,GAAG,CAACK,IAAJ,CAASC,QAAZ,EAAsB;AAClB;AACA;AACA;AACA,YAAQN,GAAG,CAACK,IAAJ,CAASC,QAAjB;AACI,WAAK,SAAL;AACKL,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD;;AACJ,WAAK,MAAL;AACKD,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AANR;;AAQAV,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH,GAdD,MAcO;AACHV,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX;AACAf,IAAAA,GAAG,CAACO,IAAJ,CAAS;AAACS,MAAAA,OAAO,EAAE;AAAV,KAAT;AAEH,GArB+D,CAuBhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGI;;AAEP,CAjDD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\nimport {MongoClient} from 'mongodb';\n\nconst help = async (res: NextApiResponse) => {\n    const mongoClient = new MongoClient(process.env.dataBaseUrl);\n    await mongoClient.connect((err) => err && res.json(400));\n    return mongoClient\n}\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n    \n    console.log(JSON.parse(req.body))\n    if(req.body.feedback) {\n        // const mongoClient = await help(res);\n        // const db = mongoClient.db(\"Main\");\n        // const collection = db.collection(\"Main\");\n        switch (req.body.feedback) {\n            case \"dislike\":\n                 console.log('disliked!!!')\n                break;\n            case \"like\":\n                 console.log('liked!')\n                break;\n        }\n        res.status(200);\n        console.log('send 200')\n    } else {\n        res.status(400)\n        res.json({message: 'No data in request'})\n\n    }\n\n    // const mongoClient = new MongoClient(process.env.dataBaseUrl);\n    // mongoClient.connect(function(err, client){\n    //     if(err){\n    //         res.status(500)\n    //         res.json({message: 'cannot connect to db'})\n    //     }\n    //     // взаимодействие с базой данных\n    //     console.log('connected to db')\n    //\n    //     const db = mongoClient.db(\"usersdb\");\n    //     const collection = db.collection(\"users\");\n    //     let user = {name: \"Tom\", age: 23};\n    //     collection.insertOne(user, function(err, result){\n    //         if(err){\n    //             res.status(500);\n    //             return console.log(err);\n    //         }\n    //         console.log(result.ops);\n    //         // mongoClient.close();\n    //     });\n    //     client.close();\n    // });\n\n\n        // res.json({status: 'ok'})\n\n}\n"]},"metadata":{},"sourceType":"module"}