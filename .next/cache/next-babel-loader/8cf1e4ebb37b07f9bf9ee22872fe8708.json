{"ast":null,"code":"import { MongoClient } from 'mongodb';\nexport default (async (req, res) => {\n  const mongoClient = new MongoClient(\"mongodb://localhost:27017/\", {\n    useNewUrlParser: true\n  });\n  await mongoClient.connect(function (err, client) {\n    if (err) {\n      return console.log(err);\n    } // взаимодействие с базой данных\n\n\n    console.log('connected to db');\n    client.close();\n  });\n  const db = mongoClient.db(\"usersdb\");\n  const collection = db.collection(\"users\");\n  let user = {\n    name: \"Tom\",\n    age: 23\n  };\n  collection.insertOne(user, function (err, result) {\n    if (err) {\n      res.status(400);\n      return console.log(err);\n    }\n\n    console.log(result.ops); // mongoClient.close();\n\n    res.json({\n      status: 'ok'\n    });\n  });\n});","map":{"version":3,"sources":["/Users/denisten/workspace/mid-landing/pages/api/test.ts"],"names":["MongoClient","req","res","mongoClient","useNewUrlParser","connect","err","client","console","log","close","db","collection","user","name","age","insertOne","result","status","ops","json"],"mappings":"AACA,SAAQA,WAAR,QAA0B,SAA1B;AAGA,gBAAe,OAAOC,GAAP,EAA4BC,GAA5B,KAAqD;AAEhE,QAAMC,WAAW,GAAG,IAAIH,WAAJ,CAAgB,4BAAhB,EAA8C;AAAEI,IAAAA,eAAe,EAAE;AAAnB,GAA9C,CAApB;AACA,QAAMD,WAAW,CAACE,OAAZ,CAAoB,UAASC,GAAT,EAAcC,MAAd,EAAqB;AAC3C,QAAGD,GAAH,EAAO;AACH,aAAOE,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAAP;AACH,KAH0C,CAI3C;;;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAF,IAAAA,MAAM,CAACG,KAAP;AACH,GAPK,CAAN;AASA,QAAMC,EAAE,GAAGR,WAAW,CAACQ,EAAZ,CAAe,SAAf,CAAX;AACA,QAAMC,UAAU,GAAGD,EAAE,CAACC,UAAH,CAAc,OAAd,CAAnB;AACA,MAAIC,IAAI,GAAG;AAACC,IAAAA,IAAI,EAAE,KAAP;AAAcC,IAAAA,GAAG,EAAE;AAAnB,GAAX;AACAH,EAAAA,UAAU,CAACI,SAAX,CAAqBH,IAArB,EAA2B,UAASP,GAAT,EAAcW,MAAd,EAAqB;AAE5C,QAAGX,GAAH,EAAO;AACHJ,MAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX;AACA,aAAOV,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAAP;AACH;;AACDE,IAAAA,OAAO,CAACC,GAAR,CAAYQ,MAAM,CAACE,GAAnB,EAN4C,CAO5C;;AACAjB,IAAAA,GAAG,CAACkB,IAAJ,CAAS;AAACF,MAAAA,MAAM,EAAE;AAAT,KAAT;AACH,GATD;AAWH,CA1BD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\nimport {MongoClient} from 'mongodb';\n\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n\n    const mongoClient = new MongoClient(\"mongodb://localhost:27017/\", { useNewUrlParser: true });\n    await mongoClient.connect(function(err, client){\n        if(err){\n            return console.log(err);\n        }\n        // взаимодействие с базой данных\n        console.log('connected to db')\n        client.close();\n    });\n\n    const db = mongoClient.db(\"usersdb\");\n    const collection = db.collection(\"users\");\n    let user = {name: \"Tom\", age: 23};\n    collection.insertOne(user, function(err, result){\n\n        if(err){\n            res.status(400);\n            return console.log(err);\n        }\n        console.log(result.ops);\n        // mongoClient.close();\n        res.json({status: 'ok'})\n    });\n\n}\n"]},"metadata":{},"sourceType":"module"}