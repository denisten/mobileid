{"ast":null,"code":"import { MongoClient } from 'mongodb';\n\nconst help = async () => {\n  const mongoClient = new MongoClient(process.env.dataBaseUrl);\n  await mongoClient.connect();\n  return mongoClient;\n};\n\nexport default (async (req, res) => {\n  const mongoClient = await help();\n  console.log(mongoClient); // const mongoClient = new MongoClient(process.env.dataBaseUrl);\n  // mongoClient.connect(function(err, client){\n  //     if(err){\n  //         res.status(500)\n  //         res.json({message: 'cannot connect to db'})\n  //     }\n  //     // взаимодействие с базой данных\n  //     console.log('connected to db')\n  //\n  //     const db = mongoClient.db(\"usersdb\");\n  //     const collection = db.collection(\"users\");\n  //     let user = {name: \"Tom\", age: 23};\n  //     collection.insertOne(user, function(err, result){\n  //         if(err){\n  //             res.status(500);\n  //             return console.log(err);\n  //         }\n  //         console.log(result.ops);\n  //         // mongoClient.close();\n  //     });\n  //     client.close();\n  // });\n\n  res.json({\n    status: 'ok'\n  });\n});","map":{"version":3,"sources":["/Users/denisten/workspace/mid-landing/pages/api/test.ts"],"names":["MongoClient","help","mongoClient","process","env","dataBaseUrl","connect","req","res","console","log","json","status"],"mappings":"AACA,SAAQA,WAAR,QAA0B,SAA1B;;AAEA,MAAMC,IAAI,GAAG,YAAY;AACrB,QAAMC,WAAW,GAAG,IAAIF,WAAJ,CAAgBG,OAAO,CAACC,GAAR,CAAYC,WAA5B,CAApB;AACA,QAAMH,WAAW,CAACI,OAAZ,EAAN;AACA,SAAOJ,WAAP;AACH,CAJD;;AAMA,gBAAe,OAAOK,GAAP,EAA4BC,GAA5B,KAAqD;AAChE,QAAMN,WAAW,GAAG,MAAMD,IAAI,EAA9B;AACAQ,EAAAA,OAAO,CAACC,GAAR,CAAYR,WAAZ,EAFgE,CAGhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGIM,EAAAA,GAAG,CAACG,IAAJ,CAAS;AAACC,IAAAA,MAAM,EAAE;AAAT,GAAT;AAEP,CA7BD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\nimport {MongoClient} from 'mongodb';\n\nconst help = async () => {\n    const mongoClient = new MongoClient(process.env.dataBaseUrl);\n    await mongoClient.connect();\n    return mongoClient\n}\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n    const mongoClient = await help();\n    console.log(mongoClient)\n    // const mongoClient = new MongoClient(process.env.dataBaseUrl);\n    // mongoClient.connect(function(err, client){\n    //     if(err){\n    //         res.status(500)\n    //         res.json({message: 'cannot connect to db'})\n    //     }\n    //     // взаимодействие с базой данных\n    //     console.log('connected to db')\n    //\n    //     const db = mongoClient.db(\"usersdb\");\n    //     const collection = db.collection(\"users\");\n    //     let user = {name: \"Tom\", age: 23};\n    //     collection.insertOne(user, function(err, result){\n    //         if(err){\n    //             res.status(500);\n    //             return console.log(err);\n    //         }\n    //         console.log(result.ops);\n    //         // mongoClient.close();\n    //     });\n    //     client.close();\n    // });\n\n\n        res.json({status: 'ok'})\n\n}\n"]},"metadata":{},"sourceType":"module"}