{"ast":null,"code":"import { MongoClient } from 'mongodb';\n\nconst help = async res => {\n  const mongoClient = new MongoClient(process.env.dataBaseUrl);\n  await mongoClient.connect(err => err && res.json(400));\n  return mongoClient;\n};\n\nexport default (async (req, res) => {\n  if (req.body.me) {\n    // const mongoClient = await help(res);\n    // const db = mongoClient.db(\"Main\");\n    // const collection = db.collection(\"Main\");\n    switch (req.body.feedback) {\n      case \"dislike\":\n        return console.log('disliked!!!');\n\n      case \"like\":\n        return console.log('liked!');\n    }\n  } else {\n    res.status(400);\n    res.json({\n      message: 'No data in request'\n    });\n  } // const mongoClient = new MongoClient(process.env.dataBaseUrl);\n  // mongoClient.connect(function(err, client){\n  //     if(err){\n  //         res.status(500)\n  //         res.json({message: 'cannot connect to db'})\n  //     }\n  //     // взаимодействие с базой данных\n  //     console.log('connected to db')\n  //\n  //     const db = mongoClient.db(\"usersdb\");\n  //     const collection = db.collection(\"users\");\n  //     let user = {name: \"Tom\", age: 23};\n  //     collection.insertOne(user, function(err, result){\n  //         if(err){\n  //             res.status(500);\n  //             return console.log(err);\n  //         }\n  //         console.log(result.ops);\n  //         // mongoClient.close();\n  //     });\n  //     client.close();\n  // });\n\n\n  res.json({\n    status: 'ok'\n  });\n});","map":{"version":3,"sources":["/Users/denisten/workspace/mid-landing/pages/api/test.ts"],"names":["MongoClient","help","res","mongoClient","process","env","dataBaseUrl","connect","err","json","req","body","me","feedback","console","log","status","message"],"mappings":"AACA,SAAQA,WAAR,QAA0B,SAA1B;;AAEA,MAAMC,IAAI,GAAG,MAAOC,GAAP,IAAgC;AACzC,QAAMC,WAAW,GAAG,IAAIH,WAAJ,CAAgBI,OAAO,CAACC,GAAR,CAAYC,WAA5B,CAApB;AACA,QAAMH,WAAW,CAACI,OAAZ,CAAqBC,GAAD,IAASA,GAAG,IAAIN,GAAG,CAACO,IAAJ,CAAS,GAAT,CAApC,CAAN;AACA,SAAON,WAAP;AACH,CAJD;;AAMA,gBAAe,OAAOO,GAAP,EAA4BR,GAA5B,KAAqD;AAChE,MAAGQ,GAAG,CAACC,IAAJ,CAASC,EAAZ,EAAgB;AACZ;AACA;AACA;AACA,YAAQF,GAAG,CAACC,IAAJ,CAASE,QAAjB;AACI,WAAK,SAAL;AACI,eAAOC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAAP;;AACJ,WAAK,MAAL;AACI,eAAOD,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAP;AAJR;AAMH,GAVD,MAUO;AACHb,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX;AACAd,IAAAA,GAAG,CAACO,IAAJ,CAAS;AAACQ,MAAAA,OAAO,EAAE;AAAV,KAAT;AAEH,GAf+D,CAiBhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGIf,EAAAA,GAAG,CAACO,IAAJ,CAAS;AAACO,IAAAA,MAAM,EAAE;AAAT,GAAT;AAEP,CA3CD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\nimport {MongoClient} from 'mongodb';\n\nconst help = async (res: NextApiResponse) => {\n    const mongoClient = new MongoClient(process.env.dataBaseUrl);\n    await mongoClient.connect((err) => err && res.json(400));\n    return mongoClient\n}\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n    if(req.body.me) {\n        // const mongoClient = await help(res);\n        // const db = mongoClient.db(\"Main\");\n        // const collection = db.collection(\"Main\");\n        switch (req.body.feedback) {\n            case \"dislike\":\n                return console.log('disliked!!!')\n            case \"like\":\n                return console.log('liked!')\n        }\n    } else {\n        res.status(400)\n        res.json({message: 'No data in request'})\n\n    }\n\n    // const mongoClient = new MongoClient(process.env.dataBaseUrl);\n    // mongoClient.connect(function(err, client){\n    //     if(err){\n    //         res.status(500)\n    //         res.json({message: 'cannot connect to db'})\n    //     }\n    //     // взаимодействие с базой данных\n    //     console.log('connected to db')\n    //\n    //     const db = mongoClient.db(\"usersdb\");\n    //     const collection = db.collection(\"users\");\n    //     let user = {name: \"Tom\", age: 23};\n    //     collection.insertOne(user, function(err, result){\n    //         if(err){\n    //             res.status(500);\n    //             return console.log(err);\n    //         }\n    //         console.log(result.ops);\n    //         // mongoClient.close();\n    //     });\n    //     client.close();\n    // });\n\n\n        res.json({status: 'ok'})\n\n}\n"]},"metadata":{},"sourceType":"module"}